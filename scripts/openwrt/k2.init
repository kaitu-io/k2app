#!/bin/sh /etc/rc.common
# k2 VPN service for OpenWrt

START=95
STOP=15

USE_PROCD=1

start_service() {
    procd_open_instance
    procd_set_param command /usr/bin/k2 run -c /etc/k2/config.yaml
    procd_set_param respawn 3600 5 5
    procd_set_param stdout 1
    procd_set_param stderr 1
    procd_close_instance
}

stop_service() {
    /usr/bin/k2 down 2>/dev/null || true
}
